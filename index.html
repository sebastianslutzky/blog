<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  
  
  <title>you are what you code</title>
  <meta name="description" content="a pretentiusly simple blog, with a series of coherent tech rambles...">
  

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://youarewhatyoucode/">
  
  
  <link rel="alternate" type="application/rss+xml" title="you are what you code" href="http://youarewhatyoucode/feed.xml">
     <!-- favicon -->
    <link rel="shortcut icon" href="http://youarewhatyoucode/favicon.ico" type="image/icon"> 
    <link rel="icon" href="http://youarewhatyoucode/favicon.ico" type="image/icon">

    <!-- favicon -->
    <link rel="shortcut icon" href="http://youarewhatyoucode/favicon.ico?v=2" /> 
    <link rel="icon" href="http://youarewhatyoucode/favicon.ico?v=2" />
        <!-- Start of StatCounter Code -->
<div id="statcounter_image" style="display:inline;"><a
title="web statistics" href="http://statcounter.com/"
class="statcounter"><img
src="//c.statcounter.com/7145507/0/8d806d50/1/" alt="web
statistics" style="border:none;" /></a></div>
    <!-- End of StatCounter Code -->

  
  <meta name="twitter:card" content="summary">
  
  <meta name="twitter:title" content="you are what you code">
  <meta name="twitter:description" content="a pretentiusly simple blog, with a series of coherent tech rambles...">
  
  

  <script type="text/javascript">
  WebFontConfig = {
    google: { families: [ 'Bitter:400,700,400italic:latin' ] }
  };
  (function() {
    var wf = document.createElement('script');
    wf.src = ('https:' == document.location.protocol ? 'https' : 'http') +
      '://ajax.googleapis.com/ajax/libs/webfont/1/webfont.js';
    wf.type = 'text/javascript';
    wf.async = 'true';
    var s = document.getElementsByTagName('script')[0];
    s.parentNode.insertBefore(wf, s);
  })();
</script>

  

</head>


  <body>

    <header class="site-header">

  <div class="wrapper">

    <a class="site-title" href="/">you are what you code</a>

    <nav class="site-nav">
      
        
        <a class="page-link" href="https://ie.linkedin.com/in/sebastianslutzky">About</a>
      
        
        <a class="page-link" href="/archives/">Archives</a>
      
        
        <a class="page-link" href="https://github.com/sebastianslutzky">GitHub</a>
      
    </nav>

  </div>

</header>


    <main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home">
  

  

  <ul class="post-list">
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2017/08/04/find-jobs-in-all-jenkins-folders/">Find Jobs In All Jenkins Folders</a>
          </h1>

          <p class="post-meta">Aug 4, 2017 • 
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/jenkins/">jenkins</a>,
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/groovy/">groovy</a>,
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/jenkins-dsl/">jenkins_dsl</a>
    
  

</p>
        </header>

        <div class="post-content">
          <div class="paragraph">
<p>Sometimes it is useful to list or apply an operation to a Jenkins job based on a regular expression.
The Jenkins DSL plugin, which executes Groovy code within Jenkins, is probably the easier way to achieve this.</p>
</div>
<div class="paragraph">
<p>I was able to find code snippets in my first web search. However, all the solutions I found
had a major limitation: not dealing with Jenkins folder.</p>
</div>
<div class="paragraph">
<p>In case you have not used them yet, <a href="https://wiki.jenkins.io/display/JENKINS/CloudBees+Folders+Plugin">Jenkins folders</a>
is a great plugin that let you organise your jobs into "container" folders, just like you would do on a file system.</p>
</div>
<div class="sect1">
<h2 id="searching_recursively">Searching recursively</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The following Groovy snippet will return a list of jobs across <strong>all folders</strong>.
Optionally, you can pass a regular expression to filter out jobs by name.
This regulare expression will be matched against the full name of the job, that is, including
folder names. This allows you, for example, to find all unit tests jobs in a folder.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span></span><span style="color: #008000; font-weight: bold">import</span> <span style="color: #0000FF; font-weight: bold">jenkins.model.*</span>

<span style="color: #B00040">def</span> <span style="color: #0000FF">isFolder</span><span style="color: #666666">(</span>abstractJob<span style="color: #666666">){</span>
 <span style="color: #008000; font-weight: bold">return</span> abstractJob<span style="color: #666666">.</span><span style="color: #7D9029">getClass</span><span style="color: #666666">().</span><span style="color: #7D9029">getName</span><span style="color: #666666">()</span> <span style="color: #666666">==</span> <span style="color: #BA2121">&quot;com.cloudbees.hudson.plugins.folder.Folder&quot;</span><span style="color: #666666">)</span>
<span style="color: #666666">}</span>

<span style="color: #B00040">def</span> <span style="color: #0000FF">collectJobRecursively</span><span style="color: #666666">(</span>abstractJob<span style="color: #666666">,</span>resultCollector<span style="color: #666666">){</span>
  <span style="color: #008000; font-weight: bold">if</span><span style="color: #666666">(</span>isFolder<span style="color: #666666">(</span>abstractJob<span style="color: #666666">))</span>
        <span style="color: #666666">{</span>
            abstractJob<span style="color: #666666">.</span><span style="color: #7D9029">items</span><span style="color: #666666">.</span><span style="color: #7D9029">findAll</span><span style="color: #666666">().</span><span style="color: #7D9029">each</span><span style="color: #666666">{</span> nestedJob <span style="color: #666666">-&gt;</span>
            collectJobRecursively<span style="color: #666666">(</span>nestedJob<span style="color: #666666">,</span>resultCollector<span style="color: #666666">)</span>
        <span style="color: #666666">}</span>
  <span style="color: #666666">}</span>
  <span style="color: #008000; font-weight: bold">else</span>
  <span style="color: #666666">{</span>
    <span style="color: #408080; font-style: italic">//only add actual jobs to the list</span>
    resultCollector <span style="color: #666666">&lt;&lt;</span> abstractJob
  <span style="color: #666666">}</span>
<span style="color: #666666">}</span>

<span style="color: #B00040">def</span> <span style="color: #0000FF">findAll</span><span style="color: #666666">(</span>pattern <span style="color: #666666">=</span> <span style="color: #BA2121">&#39;.*&#39;</span><span style="color: #666666">){</span>
 <span style="color: #B00040">def</span> resultCollector <span style="color: #666666">=</span> <span style="color: #666666">[]</span>
 Jenkins<span style="color: #666666">.</span><span style="color: #7D9029">instance</span><span style="color: #666666">.</span><span style="color: #7D9029">items</span><span style="color: #666666">.</span><span style="color: #7D9029">findAll</span><span style="color: #666666">().</span><span style="color: #7D9029">each</span><span style="color: #666666">{</span> job <span style="color: #666666">-&gt;</span>
    recurse<span style="color: #666666">(</span>job<span style="color: #666666">,</span><span style="color: #008000; font-weight: bold">null</span><span style="color: #666666">,</span>resultCollector<span style="color: #666666">)</span>
  <span style="color: #666666">}</span>

  <span style="color: #008000; font-weight: bold">return</span> resultCollector
  <span style="color: #666666">.</span><span style="color: #7D9029">findAll</span><span style="color: #666666">{</span>
    <span style="color: #408080; font-style: italic">// apply the regular expression here.</span>
    <span style="color: #408080; font-style: italic">// we are matching the Full Name (including folder names)</span>
      <span style="color: #666666">(</span>it<span style="color: #666666">.</span><span style="color: #7D9029">fullName</span> <span style="color: #666666">=~</span> <span style="color: #BA2121">/$pattern/</span><span style="color: #666666">)</span>
   <span style="color: #666666">}</span>
<span style="color: #666666">}</span></code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="using_the_recursive_findall_function">Using the recursive findAll function</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You  can now use the previous <code>findAll</code> function to search for all unit test jobs in a folder called "master_branch":</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="groovy"><span></span>
findAll<span style="color: #666666">(</span><span style="color: #BA2121">&quot;.*/master_branch/.*UnitTest.*&quot;</span><span style="color: #666666">)</span>
<span style="color: #666666">.</span><span style="color: #7D9029">each</span><span style="color: #666666">{</span>
  job <span style="color: #666666">-&gt;</span>
   <span style="color: #008000; font-weight: bold">if</span><span style="color: #666666">(</span>job<span style="color: #666666">.</span><span style="color: #7D9029">lastBuild</span><span style="color: #666666">){</span>
      println job<span style="color: #666666">.</span><span style="color: #7D9029">fullName</span> <span style="color: #666666">+</span> <span style="color: #BA2121">&#39;:&#39;</span> <span style="color: #666666">+</span> job<span style="color: #666666">.</span><span style="color: #7D9029">lastBuild</span><span style="color: #666666">.</span><span style="color: #7D9029">result</span>
    <span style="color: #666666">}</span>
  <span style="color: #008000; font-weight: bold">else</span> <span style="color: #666666">{</span>
    println job<span style="color: #666666">.</span><span style="color: #7D9029">fullName</span> <span style="color: #666666">+</span> <span style="color: #BA2121">&quot; has not run yet&quot;</span><span style="color: #666666">;</span>
  <span style="color: #666666">}</span>
 <span style="color: #666666">}</span></code></pre>
</div>
</div>
</div>
</div>
        </div>
        
          <p class="post-continue">
            <a href="/2017/08/04/find-jobs-in-all-jenkins-folders/#disqus_thread">Leave a comment</a>
          </p>

      </li>
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2017/03/31/delete-stale-git-branches-with-powershell/">Delete Stale Git Branches With Powershell</a>
          </h1>

          <p class="post-meta">Mar 31, 2017 • 
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/git/">git</a>,
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
      <a href="/categories/powershell/">powershell</a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

</p>
        </header>

        <div class="post-content">
          <div class="paragraph">
<p>With the increasing adoption of source code management workflows such as <a href="http://nvie.com/posts/a-successful-git-branching-model/">Git Flow</a>,
it is common to keep "stale" branches in local repositories.</p>
</div>
<div class="sect1">
<h2 id="steps_to_reproduce">Steps to reproduce</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The steps needed to end up in this situation are more or less like this:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Dev1 creates &amp; publishes the branch Feature1</p>
<div class="literalblock">
<div class="content">
<pre>git checkout -B Feature1
..make &amp; commit changes..
git push -u origin Feature1</pre>
</div>
</div>
</li>
<li>
<p>Dev2 fetches the branch to collaborate or review</p>
<div class="literalblock">
<div class="content">
<pre>git fetch
git checkout Feature1</pre>
</div>
</div>
</li>
<li>
<p>Dev2 deletes the Feature1 branch after merging it into master</p>
<div class="literalblock">
<div class="content">
<pre># delete the branch on the remote
git push origin --delete Feature1
# delete the branch locally
git branch -D Feature1</pre>
</div>
</div>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="pruning_stale_references">Pruning stale references</h2>
<div class="sectionbody">
<div class="paragraph">
<p>At this stage,  Dev1 (and 3, 4 etc) will want to have the deleted branch gone from their workspace too.</p>
</div>
<div class="paragraph">
<p>A quick search will lead you to the <code>prune</code> sub command</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$&gt; git remote update origin --prune
Fetching origin
From https://github.com/sebastianslutzky/TestRepo
x [deleted]         (none)     -&gt; origin/Feature1</pre>
</div>
</div>
<div class="paragraph">
<p>However, this command only removes the reference to the tracking branch, not the local branch itself.
You can see that the orphan branch is still here:</p>
</div>
<div class="literalblock">
<div class="content">
<pre>$&gt; git branch -l
 Feature1
 * master</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="delete_branches_not_in_the_remote">Delete branches not in the remote</h2>
<div class="sectionbody">
<div class="paragraph">
<p>So here is a simple Powershell script that deletes the orphan local branch:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="powershell"><table class="pyhltable"><tr><td><div class="linenodiv" style="background-color: #f0f0f0; padding-right: 10px">1
2
3
4
5
6
7</div></td><td class="code"><span></span> <span style="color: #19177C">$local</span>=git branch -l
 <span style="color: #19177C">$remote</span>=git branch -r
 <span style="color: #19177C">$local</span>|
    %{<span style="color: #19177C">$_</span>.Trim()}|
    ?{<span style="color: #666666">-not</span> (<span style="color: #19177C">$remote</span> <span style="color: #666666">-like</span> <span style="color: #BA2121">&#39;*&#39;</span> + <span style="color: #19177C">$_</span>) }|
    ?{<span style="color: #666666">-not</span>(<span style="color: #19177C">$_</span> <span style="color: #666666">-match</span> <span style="color: #BA2121">&quot;master&quot;</span> )}|
    %{git branch -D <span style="color: #19177C">$_</span>}
</td></tr></table></code></pre>
</div>
</div>
<div class="paragraph">
<p>Surely this code could be compressed in one single piped command, but it could turn a bit confusing.</p>
</div>
<div class="paragraph">
<p>We are getting the list of local and remote branches (lines 1 &amp; 2).
Then we perform a substraction set operation ($local - $remote) (line 5).
This will gives us the set of local branches not in the remote local branches not in the remote.</p>
</div>
<div class="paragraph">
<p>We finally delete them in line 7.</p>
</div>
</div>
</div>
        </div>
        
          <p class="post-continue">
            <a href="/2017/03/31/delete-stale-git-branches-with-powershell/#disqus_thread">Leave a comment</a>
          </p>

      </li>
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2015/11/24/take-control-of-your-api-aspects/">Take control of your Web API aspects</a>
          </h1>

          <p class="post-meta">Nov 24, 2015 • 
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/asp-web-api/">asp web api</a>,
    
  
    
  
    
  
    
  
    
  

  
  
    
      <a href="/categories/architecture/">architecture</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/net/">.net</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/c/">c#</a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

</p>
        </header>

        <div class="post-content">
          <div class="paragraph">
<p>Action filters  are a way of modifying or decorating the execution of one or more action methods. They provide points of execution before and after the action method itself executes.</p>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
<div class="paragraph">
<p>For more details on action filters see <a href="http://www.asp.net/mvc/overview/older-versions-1/controllers-and-routing/understanding-action-filters-cs"">this article</a></p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect1">
<h2 id="order_of_execution_salami_slice_russian_doll">Order of Execution: Salami Slice + Russian Doll</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can have action filters declared at three levels: globally, controller-wide or action-specific. <strong>They will execute in that order&#8230;&#8203;sort of.</strong></p>
</div>
<div class="paragraph">
<p>Once ordered, action filters are executed <strong>sequentially</strong>, without connection between them.</p>
</div>
<div class="paragraph">
<p>But here&#8217;s the fun bit, the order of execution is reverted when the response is processed. In other words, if when processing the request the order of filters is</p>
</div>
<div class="paragraph">
<p><span class="menuseq"><b class="menu">View</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">FilterA</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">FilterB</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">FilterC</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Action</b></span></p>
</div>
<div class="paragraph">
<p>then when processing the response the order will be</p>
</div>
<div class="paragraph">
<p><span class="menuseq"><b class="menu">View</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">Action</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">FilterC</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="submenu">FilterB</b>&#160;<i class="fa fa-angle-right caret"></i> <b class="menuitem">Filter</b></span></p>
</div>
<div class="paragraph">
<p>there are some design patterns like:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="https://en.wikipedia.org/wiki/Chain-of-responsibility_pattern">Chain of Responsibility</a></p>
</li>
<li>
<p><a href="https://en.wikipedia.org/wiki/Command_pattern">Commands</a></p>
</li>
<li>
<p>I prefer to use the more visual <a href="http://blogs.msdn.com/b/skaufman/archive/2005/04/25/411809.aspx">Salami Slice</a> for the sequential execution.</p>
</li>
<li>
<p><a href="http://blogs.msdn.com/b/skaufman/archive/2005/04/21/410486.aspx">Russian Doll</a></p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="overriding_a_global_filter_from_an_action_method">Overriding a global filter from an action method</h3>
<div class="paragraph">
<p>This default order is convenient in many cases, but not always. I found myself in the following scenario: I needed to execute a default action filter <strong>unless</strong> an action was annotated with an overriding action filter attribute.</p>
</div>
<div class="paragraph">
<p>Two examples when this could be useful:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><strong><strong>Always log http traffic, except sensitive data: </strong></strong></p>
<div class="ulist">
<ul>
<li>
<p>Log the raw http request and response to all action methods.</p>
</li>
<li>
<p>But: when the request is for PUT /PaymentCardDetails, then use a custom logger that will not log the payment card number and security code.</p>
</li>
</ul>
</div>
</li>
<li>
<p><strong><strong>Always require authentication tokens, except Login and Forgot Password methods: </strong></strong></p>
<div class="ulist">
<ul>
<li>
<p>Add a global action filter that will always require authentication token in the request&#8217;s header.</p>
</li>
<li>
<p>But: annotate the Login and ForgotPassword action methods with an attribute that will bypass the authentication requirement.</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="so_here_is_the_implementation">&#8230;&#8203;so here is the implementation:</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="step_1_create_an_interface_for_overriding_attributes">Step 1: Create an interface for overriding attributes</h3>
<div class="paragraph">
<p>Something like this is the simplest thing that can possibly do the job:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c#"><span></span><span style="color: #408080; font-style: italic">//To be implemented by actionfilterattributes that override a global action filter</span>
<span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">interface</span> IOverridingFilterAttribute
{
    <span style="color: #408080; font-style: italic">//The type of actionfilter to be replaced for this request</span>
    Type OverriddenType { <span style="color: #008000; font-weight: bold">get</span>; }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step_2_create_your_own_actionfilterprovider_with_the_overriding_behaviour">Step 2: Create your own ActionFilterProvider with the overriding behaviour</h3>
<div class="paragraph">
<p>IFilterProvider is a component you can customise. It defines what action filters to use in this request, and in which order</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c#"><span></span><span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">OverridingFilterProvider</span> : IFilterProvider
{
    <span style="color: #408080; font-style: italic">//called by WebApi on each request, in order</span>
    <span style="color: #408080; font-style: italic">// to get the list of filters to apply</span>
    <span style="color: #008000; font-weight: bold">public</span> IEnumerable&lt;FilterInfo&gt; GetFilters(HttpConfiguration configuration, HttpActionDescriptor actionDescriptor)
    {
        <span style="color: #B00040">var</span> globalFilters = configuration.Filters;
        <span style="color: #B00040">var</span> controllerFilters = actionDescriptor.ControllerDescriptor.GetFilters().Select(x =&gt; <span style="color: #008000; font-weight: bold">new</span> FilterInfo(x,FilterScope.Controller));
        <span style="color: #B00040">var</span> actionFilters = actionDescriptor.GetFilters().Select(x =&gt; <span style="color: #008000; font-weight: bold">new</span> FilterInfo(x,FilterScope.Action));

        <span style="color: #408080; font-style: italic">//we&#39;ll apply global,controller-wide</span>
        <span style="color: #408080; font-style: italic">//and then action attribute filters</span>
        <span style="color: #B00040">var</span> all = globalFilters.Concat(controllerFilters).Concat(actionFilters);
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #0000FF">RemoveAnyOverriddenFilter</span>(all);
    }

    <span style="color: #408080; font-style: italic">//if there are IOverridingFilterAttributes,</span>
    <span style="color: #408080; font-style: italic">//remove the filters they override</span>
    <span style="color: #008000; font-weight: bold">private</span> IEnumerable&lt;FilterInfo&gt; RemoveAnyOverriddenFilter(IEnumerable&lt;FilterInfo&gt; all)
    {
        <span style="color: #B00040">var</span> overridingFilters =
            all.Where(x =&gt; (x.Instance <span style="color: #008000; font-weight: bold">as</span> IOverridingFilterAttribute) != <span style="color: #008000; font-weight: bold">null</span>)
                .Select(x =&gt; (IOverridingFilterAttribute) x.Instance);

        <span style="color: #B00040">var</span> filtered =  all.Where(x =&gt; !IsOverridden(x, overridingFilters));
        <span style="color: #008000; font-weight: bold">return</span> filtered;
    }

    <span style="color: #008000; font-weight: bold">private</span> <span style="color: #B00040">bool</span> <span style="color: #0000FF">IsOverridden</span>(FilterInfo target, IEnumerable&lt;IOverridingFilterAttribute&gt; overrides)
    {
        <span style="color: #008000; font-weight: bold">foreach</span> (<span style="color: #B00040">var</span> overridingFilter <span style="color: #008000; font-weight: bold">in</span> overrides)
        {
            <span style="color: #B00040">var</span> filterType = target.Instance.GetType();
            <span style="color: #B00040">var</span> overriddenType = overridingFilter.OverriddenType;

            <span style="color: #008000; font-weight: bold">if</span> (overriddenType.IsAssignableFrom(filterType))
                <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">true</span>;
        }
        <span style="color: #008000; font-weight: bold">return</span> <span style="color: #008000; font-weight: bold">false</span>;
    }

    <span style="color: #008000; font-weight: bold">private</span> IEnumerable&lt;FilterInfo&gt; OrderFilters(IEnumerable&lt;IFilter&gt; filters, FilterScope scope)
    {
        <span style="color: #008000; font-weight: bold">return</span> filters.Select(instance =&gt; <span style="color: #008000; font-weight: bold">new</span> FilterInfo(instance, scope));
    }
}</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="step_3_register_your_filter_provider">Step 3: Register your Filter Provider</h3>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="c#"><span></span><span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">WebApiApplication</span> : HttpApplication
{
    <span style="color: #008000; font-weight: bold">protected</span> <span style="color: #008000; font-weight: bold">void</span> <span style="color: #0000FF">Application_Start</span>()
    {
        <span style="color: #B00040">var</span> services = GlobalConfiguration.Configuration.Services;
        services.Replace(<span style="color: #008000; font-weight: bold">typeof</span>(IFilterProvider),
            <span style="color: #008000; font-weight: bold">new</span> <span style="color: #0000FF">OverridingFilterProvider</span>());
    }
}</code></pre>
</div>
</div>
</div>
</div>
</div>
        </div>
        
          <p class="post-continue">
            <a href="/2015/11/24/take-control-of-your-api-aspects/#disqus_thread">Leave a comment</a>
          </p>

      </li>
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2011/10/29/naked-objects-is-opensource/">Naked Objects Is Opensource</a>
          </h1>

          <p class="post-meta">Oct 29, 2011 • 
  
  
    
  
    
  
    
  
    
      <a href="/categories/news/">news</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/nakedobjects/">nakedobjects</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/ddd/">ddd</a>
    
  
    
  
    
  
    
  
    
  
    
  

</p>
        </header>

        <div class="post-content">
          <div class="paragraph">
<p>The Naked Objects framework for .Net is now open sourced under Microsoft Public License.</p>
</div>
<div class="paragraph">
<p>The projects is now hosted at <a href="http://nakedobjects.codeplex.com/">Codeplex</a></p>
</div>
<div class="paragraph">
<p>You can download the framework from there or in Visual Studio, from NuGet</p>
</div>
        </div>
        
          <p class="post-continue">
            <a href="/2011/10/29/naked-objects-is-opensource/#disqus_thread">Leave a comment</a>
          </p>

      </li>
    
      
      

      <li>
        <header class="post-header">
          <h1 class="post-title">
            <a class="post-link" href="/2011/08/22/apply-operation-in-collection-with-linq/">Apply Operation In Collection With Linq</a>
          </h1>

          <p class="post-meta">Aug 22, 2011 • 
  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/linq/">linQ</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/net/">.net</a>,
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

  
  
    
  
    
  
    
  
    
  
    
  
    
      <a href="/categories/c/">c#</a>
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  
    
  

</p>
        </header>

        <div class="post-content">
          <div class="paragraph">
<p>These days, it is unusual to write an implementation of the Iterator pattern. Most of the modern languages included a library with a set of aggregate objects that follow this pattern as defined in the <a href="https://www.amazon.com/Design-Patterns-Elements-Reusable-Object-Oriented/dp/0201633612">Gang of Four book</a>.</p>
</div>
<div class="paragraph">
<p>In .Net, these objects are in the System.Collections namespace and they include classes such as Lists, Queues, Dictionaries, and also their specialised strongly typed (Generic) version.</p>
</div>
<div class="paragraph">
<p>The Gang Of Four defines two types of iterators: External and Internal. The External requires the client to traverse the items (by looping through the items until the end of the iterator). In contrast to this, the internal iterator delegates this process to a Traverse mix-in class that can be extended and customised.</p>
</div>
<div class="paragraph">
<p>I was looking for something similar to the internal iterator in .Net. That is, a generic way of passing an operation to a collection that would apply it to each of its items. None of the LinQ extension methods for collections seemed to do this, so I wrote one:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="csharp"><span></span><span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">static</span> <span style="color: #008000; font-weight: bold">class</span> <span style="color: #0000FF; font-weight: bold">Extensions</span>
{
    <span style="color: #008000; font-weight: bold">public</span> <span style="color: #008000; font-weight: bold">static</span> <span style="color: #008000; font-weight: bold">void</span> ApplyOperation&lt;T&gt;
                (<span style="color: #008000; font-weight: bold">this</span> IEnumerable&lt;T&gt; iterator,
                Action&lt;T&gt; action)
    {
        <span style="color: #008000; font-weight: bold">foreach</span> (<span style="color: #B00040">var</span> item <span style="color: #008000; font-weight: bold">in</span> iterator)
            action(item);
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Which can be used as follows:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="csharp"><span></span>IEnumerable&lt;<span style="color: #B00040">string</span>&gt; cities =
            <span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">string</span>[] { <span style="color: #BA2121">&quot;Dublin&quot;</span>, <span style="color: #BA2121">&quot;Buenos Aires&quot;</span>, <span style="color: #BA2121">&quot;Madrid&quot;</span> };
cities.ApplyOperation(x=&gt;Console.WriteLine(<span style="color: #BA2121">&quot;City name: &quot;</span> + x));</code></pre>
</div>
</div>
<div class="paragraph">
<p>or simply</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="pygments highlight"><code data-lang="csharp"><span></span><span style="color: #008000; font-weight: bold">new</span> <span style="color: #B00040">string</span>[] {
    <span style="color: #BA2121">&quot;Dublin&quot;</span>,
    <span style="color: #BA2121">&quot;Buenos Aires&quot;</span>,
    <span style="color: #BA2121">&quot;Madrid&quot;</span> }
    .ApplyOperation(
        x =&gt; Console.WriteLine(<span style="color: #BA2121">&quot;City name: &quot;</span> + x));</code></pre>
</div>
</div>
<div class="paragraph">
<p>which prints the following output:</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/console.png" alt="console">
</div>
</div>
        </div>
        
          <p class="post-continue">
            <a href="/2011/08/22/apply-operation-in-collection-with-linq/#disqus_thread">Leave a comment</a>
          </p>

      </li>
    
  </ul>

  
  <div class="pagination">
    
      <a class="previous" href="/posts/2/">&laquo; Older</a>
    

    
  </div>



</div>

      </div>
    </main>

    <footer class="site-footer">

  <div class="wrapper">

    <p>
      

&copy; sebastian slutzky - Powered by <a href="https://jekyllrb.com">Jekyll</a> &amp; <a href="https://github.com/yous/whiteglass">whiteglass</a> - Subscribe via <a href="http://youarewhatyoucode/feed.xml">RSS</a>

    </p>

  </div>

</footer>


  </body>

</html>
